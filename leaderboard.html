<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Alpha-Z Leaderboard</title>
    <link rel="stylesheet" href="style.css">
    
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="apple-touch-icon" href="icon-180.png">
</head>
<body class="game-mode">
    <div class="screen">
        <h1 style="color: var(--accent); margin: 20px 0; text-shadow: 0 0 10px rgba(241,196,15,0.5);">ğŸ† TOP RANKERS</h1>
        
        <div id="leaderboard-list" class="leaderboard-container">
            <p style="text-align:center; color:#888; margin-top:50px;">Loading ranks...</p>
        </div>

        <div style="margin-top: 20px; width: 100%; max-width: 500px; padding: 0 10px;">
            <button class="btn btn-primary" style="width: 100%;" onclick="location.href='/'">ğŸ  Back to Menu</button>
        </div>
    </div>

    <script type="module">
        import { getLeaderboardData } from './js/game-core.js';

        async function loadRanks() {
            const listEl = document.getElementById('leaderboard-list');
            
            try {
                // DBì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                const ranks = await getLeaderboardData();

                if (ranks.length === 0) {
                    listEl.innerHTML = '<p style="text-align:center; color:#888;">No records yet.</p>';
                    return;
                }

                listEl.innerHTML = ''; // ë¡œë”© ë¬¸êµ¬ ì œê±°

                ranks.forEach((user, index) => {
                    const rank = index + 1;
                    const item = document.createElement('div');
                    
                    // 1,2,3ìœ„ íŠ¹ë³„ ìŠ¤íƒ€ì¼ í´ë˜ìŠ¤ ì¶”ê°€
                    item.className = `rank-item ${rank <= 3 ? 'rank-' + rank : ''}`;
                    
                    // ë©”ë‹¬ ì•„ì´ì½˜ ì²˜ë¦¬
                    let medal = rank;
                    if(rank === 1) medal = 'ğŸ¥‡';
                    else if(rank === 2) medal = 'ğŸ¥ˆ';
                    else if(rank === 3) medal = 'ğŸ¥‰';

                    // HTML êµ¬ì„±
                    item.innerHTML = `
                        <div class="rank-number">${medal}</div>
                        <div class="rank-name">${user.username}</div>
                        <div class="rank-stats">
                            <div class="rank-best">${user.bestChar} Block</div>
                            <div class="rank-stars">â­ ${user.stars}</div>
                        </div>
                    `;
                    listEl.appendChild(item);
                });

            } catch (e) {
                console.error(e);
                listEl.innerHTML = '<p style="text-align:center; color:red;">Failed to load rankings.</p>';
            }
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        window.onload = loadRanks;
    </script>
</body>
</html>
