<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Leaderboard</title>
    <link rel="stylesheet" href="style.css">
    <style>
        body { text-align: center; color: white; background-color: #2c3e50; font-family: sans-serif; }
        table { width: 90%; max-width: 500px; margin: 20px auto; border-collapse: collapse; background: #1e1e1e; border-radius: 10px; overflow: hidden; box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        th, td { padding: 15px; border-bottom: 1px solid #333; text-align: center; }
        th { background: #111; color: #f1c40f; font-size: 0.9rem; letter-spacing: 1px; }
        .rank-1 td { color: gold; font-weight: bold; background: rgba(255, 215, 0, 0.1); }
        .rank-2 td { color: silver; font-weight: bold; background: rgba(192, 192, 192, 0.1); }
        .rank-3 td { color: #cd7f32; font-weight: bold; background: rgba(205, 127, 50, 0.1); }
    </style>
</head>
<body>
    <h1 style="margin-top: 30px; color: #f1c40f;">HALL OF FAME</h1>
    
    <div class="mode-selector">
        <button class="btn" onclick="loadRank('EASY')">EASY</button>
        <button class="btn" onclick="loadRank('NORMAL')">NORMAL</button>
        <button class="btn" onclick="loadRank('HARD')">HARD</button>
        <button class="btn" onclick="loadRank('HELL')">HELL</button>
    </div>

    <h3 id="current-mode" style="color:#aaa; font-weight:normal; margin-bottom: 15px;">LOADING...</h3>

    <table>
        <thead>
            <tr>
                <th width="15%">#</th>
                <th width="50%">NAME</th>
                <th width="35%">SCORE</th>
            </tr>
        </thead>
        <tbody id="rank-list"></tbody>
    </table>

    <button class="btn" style="margin: 30px auto; background: #444;" onclick="location.href='/'">üè† MAIN MENU</button>

    <script type="module">
        import { getLeaderboardData } from "./js/game-core.js";

        window.loadRank = async (diff) => {
            document.getElementById('current-mode').textContent = `- ${diff} MODE -`;
            const list = document.getElementById('rank-list');
            list.innerHTML = '<tr><td colspan="3" style="padding:20px;">Loading...</td></tr>'; 

            const data = await getLeaderboardData(diff);
            
            list.innerHTML = '';
            if(data.length === 0) {
                list.innerHTML = '<tr><td colspan="3" style="color:#666; padding:30px;">No Records Yet</td></tr>';
                return;
            }

            data.forEach((item, index) => {
                const rankClass = index === 0 ? 'rank-1' : (index === 1 ? 'rank-2' : (index === 2 ? 'rank-3' : ''));
                const row = `
                    <tr class="${rankClass}">
                        <td>${index + 1}</td>
                        <td style="text-align:left; padding-left:20px;">${item.username}</td>
                        <td style="font-size:1.2rem; font-weight:bold;">${item.score ? item.score.toLocaleString() : 0}</td>
                    </tr>
                `;
                list.innerHTML += row;
            });
        };
        window.onload = () => loadRank('NORMAL');
    </script>
</body>
</html>
